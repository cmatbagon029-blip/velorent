import{a as s}from"./chunk-NUHOWZQU.js";import{ba as c,h as n,i as a}from"./chunk-2AVOPVJ6.js";import{g as i}from"./chunk-2K7NMRC4.js";var u=(()=>{let o=class o{constructor(e){var t;this.http=e,this.apiUrl=((t=s)==null?void 0:t.apiUrl)||"https://velorent-backend.onrender.com/api"}authenticateSocialUser(e){return this.http.post(`${this.apiUrl}/auth/social-login`,{provider:e.provider,socialId:e.id,email:e.email,name:e.name,picture:e.picture})}handleOAuthCallback(e){return i(this,null,function*(){try{console.log("Handling OAuth callback for user:",e);let t=yield this.authenticateSocialUser(e).toPromise();if(console.log("Backend authentication response:",t),t&&t.success)localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),console.log("User data stored successfully");else throw new Error("Authentication failed")}catch(t){throw console.error("Error in OAuth callback handling:",t),t}})}};o.\u0275fac=function(t){return new(t||o)(a(c))},o.\u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();export{u as a};
