<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button [defaultHref]="'/vehicle/' + vehicleId"></ion-back-button>
    </ion-buttons>
    <ion-title>Rent Vehicle</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form #bookingForm="ngForm">
    <!-- Step 1: Personal Information -->
    <div *ngIf="step === 1" class="step1-container">
      <ion-card class="personal-info-card">
        <ion-card-header>
          <ion-card-title class="section-title">
            <ion-icon name="person-outline"></ion-icon>
            Personal Information
          </ion-card-title>
          <p class="section-subtitle">Please enter your personal details to begin.</p>
        </ion-card-header>
        <ion-card-content>
          <ion-item class="form-field-item">
            <ion-label position="stacked">Full Name <span class="required">*</span></ion-label>
            <ion-input type="text" [(ngModel)]="fullName" name="fullName" required></ion-input>
          </ion-item>
          
          <ion-item class="form-field-item">
            <ion-label position="stacked">Mobile Number <span class="required">*</span></ion-label>
            <ion-input type="tel" [(ngModel)]="mobileNumber" name="mobileNumber" required maxlength="15"></ion-input>
          </ion-item>
          
          <ion-item class="form-field-item">
            <ion-label position="stacked">Service Type <span class="required">*</span></ion-label>
            <ion-select 
              [(ngModel)]="serviceType" 
              name="serviceType" 
              placeholder="Select service type"
              required>
              <ion-select-option value="Self Drive">Self Drive</ion-select-option>
              <ion-select-option value="Pick-up/Drop-off">With Driver</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-card-content>
      </ion-card>
      
      <ion-button expand="block" class="btn-primary-modern" (click)="nextStep()" [disabled]="!fullName || !mobileNumber || !serviceType">
        Next
      </ion-button>
    </div>

    <!-- Step 2: Booking Details -->
    <div *ngIf="step === 2" class="step2-container">
      
      <!-- ============================================
           VEHICLE DETAILS SECTION
           ============================================ -->
      <ion-card *ngIf="vehicle" class="form-section-card">
        <ion-card-header>
          <ion-card-title class="section-title">
            <ion-icon name="car-outline"></ion-icon>
            Vehicle Details
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <!-- Vehicle Image -->
          <div class="vehicle-image-container">
            <img [src]="vehicle.imageUrl || 'assets/images/vehicle-placeholder.svg'" 
                 [alt]="vehicle.name"
                 (error)="vehicle.imageUrl = 'assets/images/vehicle-placeholder.svg'"/>
            <div class="image-gradient-overlay"></div>
            <ion-badge *ngIf="vehicle.status === 'available' || !vehicle.status" color="success" class="vehicle-status-badge">
              Available
            </ion-badge>
            <ion-badge *ngIf="vehicle.status && vehicle.status !== 'available'" color="warning" class="vehicle-status-badge">
              {{ vehicle.status }}
            </ion-badge>
          </div>

          <!-- Vehicle Name & Type -->
          <div class="vehicle-info-header">
            <h3 class="vehicle-name">{{ vehicle.name }}</h3>
            <p class="vehicle-type">{{ vehicle.type }}</p>
          </div>

          <!-- Price Options -->
          <div class="pricing-details">
            <div class="price-row" [class.selected]="serviceType === 'Self Drive'" (click)="selectServiceType('Self Drive')">
              <ion-icon name="car-sport-outline"></ion-icon>
              <div class="price-info">
                <span class="price-label">WITHOUT DRIVER</span>
                <span class="price-amount">‚Ç±{{ vehicle.price_without_driver | number:'1.2-2' }} <span class="price-unit">/ day</span></span>
              </div>
              <ion-icon *ngIf="serviceType === 'Self Drive'" name="checkmark-circle" class="check-icon"></ion-icon>
            </div>
            <div class="price-row" [class.selected]="serviceType === 'Pick-up/Drop-off'" (click)="selectServiceType('Pick-up/Drop-off')">
              <ion-icon name="location-outline"></ion-icon>
              <div class="price-info">
                <span class="price-label">PICK-UP/DROP-OFF</span>
                <span class="price-amount">‚Ç±{{ vehicle.price_with_driver | number:'1.2-2' }} <span class="price-unit">/ day</span></span>
              </div>
              <ion-icon *ngIf="serviceType === 'Pick-up/Drop-off'" name="checkmark-circle" class="check-icon"></ion-icon>
            </div>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- ============================================
           1) RENTAL SCHEDULE SECTION
           ============================================ -->
      <ion-card class="form-section-card">
        <ion-card-header>
          <ion-card-title class="section-title">
            <ion-icon name="calendar-outline"></ion-icon>
            Rental Schedule
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <!-- Availability Notice Banner -->
          <div class="availability-banner success" *ngIf="companyAvailability.length > 0">
            <ion-icon name="checkmark-circle-outline"></ion-icon>
            <span>Available days: {{ getAvailableDaysText() }}</span>
          </div>

          <!-- Date Fields - 2 Column Layout -->
          <div class="date-fields-grid">
            <!-- Start Date -->
            <div class="date-field-wrapper">
              <ion-item class="form-field-item">
                <ion-label position="stacked">Start Date <span class="required">*</span></ion-label>
                <ion-input 
                  type="date" 
                  [(ngModel)]="rentFromDate" 
                  name="rentFromDate" 
                  [min]="minDate"
                  (ionChange)="onDateChange()"
                  (ionFocus)="onDateFocus()"
                  [readonly]="loadingAvailability">
                </ion-input>
                <ion-icon name="calendar-outline" slot="end"></ion-icon>
              </ion-item>
              <!-- Date Validation Error -->
              <div class="inline-error" *ngIf="rentFromDate && !isDateAvailableForSelection(rentFromDate)">
                <ion-icon name="close-circle-outline"></ion-icon>
                <span>Not available</span>
              </div>
            </div>

            <!-- End Date -->
            <div class="date-field-wrapper">
              <ion-item class="form-field-item">
                <ion-label position="stacked">End Date <span class="required">*</span></ion-label>
                <ion-input 
                  type="date" 
                  [(ngModel)]="rentToDate" 
                  name="rentToDate" 
                  [min]="rentFromDate || minDate"
                  (ionChange)="onDateChange()"
                  (ionFocus)="onDateFocus()"
                  [readonly]="loadingAvailability || !rentFromDate"
                  [disabled]="!rentFromDate">
                </ion-input>
                <ion-icon name="calendar-outline" slot="end"></ion-icon>
              </ion-item>
              <!-- End Date Validation Error -->
              <div class="inline-error" *ngIf="rentToDate && !isDateAvailableForSelection(rentToDate)">
                <ion-icon name="close-circle-outline"></ion-icon>
                <span>Not available</span>
              </div>
            </div>
          </div>

          <!-- Rental Duration Display -->
          <div class="rental-duration-banner" *ngIf="rentFromDate && rentToDate">
            <ion-icon name="calendar"></ion-icon>
            <span><strong>{{ calculateDays() }} day(s)</strong> rental period</span>
          </div>

          <!-- Availability Status Banners -->
          <div class="availability-banner warning" *ngIf="rentFromDate && !companyAvailability.length">
            <ion-icon name="information-circle-outline"></ion-icon>
            <span>Operating: Mon-Fri (10:00 AM - 04:00 PM). Weekends closed.</span>
          </div>

          <div class="availability-banner loading" *ngIf="rentFromDate && loadingAvailability">
            <ion-spinner name="crescent"></ion-spinner>
            <span>Checking availability...</span>
          </div>

          <div class="availability-banner error" *ngIf="rentFromDate && availabilityError">
            <ion-icon name="warning-outline"></ion-icon>
            <span>{{ availabilityError }}</span>
          </div>

          <div class="availability-banner success" *ngIf="rentFromDate && selectedDateAvailability && selectedDateAvailability.isAvailable">
            <ion-icon name="checkmark-circle-outline"></ion-icon>
            <span>{{ selectedDateAvailability.message }}</span>
          </div>

          <!-- Time Availability Info -->
          <div class="availability-banner info" *ngIf="rentFromDate && companyAvailability.length > 0 && getAvailableTimeSlots(rentFromDate).length > 0">
            <ion-icon name="time-outline"></ion-icon>
            <span>Available times: {{ getAvailableTimeRangeText(rentFromDate) }}</span>
          </div>

          <!-- Time Validation Error -->
          <div class="availability-banner error" *ngIf="rentFromDate && getAvailableTimeSlots(rentFromDate).length === 0">
            <ion-icon name="close-circle-outline"></ion-icon>
            <span>No time slots available. {{ getAvailableDaysText() }}</span>
          </div>

          <!-- Time of Rent - Full Width -->
          <ion-item class="form-field-item time-field">
            <ion-label position="stacked">Time of Rent <span class="required">*</span></ion-label>
            <ion-input 
              type="time" 
              [(ngModel)]="rentTime" 
              name="rentTime" 
              (ionChange)="onTimeChange()"
              [readonly]="!rentFromDate"
              [disabled]="!rentFromDate">
            </ion-input>
            <ion-icon name="time-outline" slot="end"></ion-icon>
          </ion-item>

          <!-- Time Selection Validation Error -->
          <div class="inline-error" *ngIf="rentTime && rentFromDate && !isTimeAvailableForSelection(rentTime)">
            <ion-icon name="close-circle-outline"></ion-icon>
            <span>Time not available. Available: {{ getAvailableTimeRangeText(rentFromDate) }}</span>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- ============================================
           2) LOCATION & PURPOSE SECTION
           ============================================ -->
      <ion-card class="form-section-card">
        <ion-card-header>
          <ion-card-title class="section-title">
            <ion-icon name="location-outline"></ion-icon>
            Location & Purpose
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-item class="form-field-item">
            <ion-label position="stacked">Location <span class="required">*</span></ion-label>
            <ion-input 
              type="text" 
              [(ngModel)]="destination" 
              name="destination" 
              placeholder="Enter pickup/delivery location"
              required>
            </ion-input>
          </ion-item>
          
          <ion-item class="form-field-item">
            <ion-label position="stacked">Occasion</ion-label>
            <ion-input 
              type="text" 
              [(ngModel)]="occasion" 
              name="occasion"
              placeholder="e.g., Wedding, Business Trip, Vacation">
            </ion-input>
          </ion-item>
          
          <ion-item class="form-field-item">
            <ion-label position="stacked">Message</ion-label>
            <ion-textarea 
              [(ngModel)]="message" 
              name="message"
              placeholder="Any special requests or additional information...">
            </ion-textarea>
          </ion-item>
        </ion-card-content>
      </ion-card>

      <!-- ============================================
           3) VERIFICATION & PAYMENT SECTION
           ============================================ -->
      <ion-card class="form-section-card">
        <ion-card-header>
          <ion-card-title class="section-title">
            <ion-icon name="shield-checkmark-outline"></ion-icon>
            Verification & Payment
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <!-- ID Upload Fields - Drag and Drop Style -->
          <div class="upload-section">
            <!-- Valid ID Upload -->
            <div class="upload-box" *ngIf="serviceType === 'Self Drive'">
              <input 
                type="file" 
                id="validIdInput" 
                accept="image/*" 
                (change)="onFileChange($event, 'valid')" 
                required 
                class="file-input" />
              <label for="validIdInput" class="upload-label">
                <ion-icon name="document-attach-outline" class="upload-icon"></ion-icon>
                <div class="upload-text">
                  <span class="upload-title">Valid ID (Driver's License) <span class="required">*</span></span>
                  <span class="upload-hint">Click or drag to upload</span>
                </div>
                <ion-icon *ngIf="validIdPreview" name="checkmark-circle" class="upload-success"></ion-icon>
              </label>
              <div *ngIf="validIdPreview" class="image-preview">
                <img [src]="validIdPreview" alt="Valid ID Preview" />
              </div>
            </div>

            <div class="upload-box" *ngIf="serviceType === 'Pick-up/Drop-off'">
              <input 
                type="file" 
                id="validIdInputPickup" 
                accept="image/*" 
                (change)="onFileChange($event, 'valid')" 
                class="file-input" />
              <label for="validIdInputPickup" class="upload-label">
                <ion-icon name="document-attach-outline" class="upload-icon"></ion-icon>
                <div class="upload-text">
                  <span class="upload-title">Valid ID (Driver's License or Other)</span>
                  <span class="upload-hint">Click or drag to upload</span>
                </div>
                <ion-icon *ngIf="validIdPreview" name="checkmark-circle" class="upload-success"></ion-icon>
              </label>
              <div *ngIf="validIdPreview" class="image-preview">
                <img [src]="validIdPreview" alt="Valid ID Preview" />
              </div>
            </div>

            <!-- Additional ID Upload -->
            <div class="upload-box">
              <input 
                type="file" 
                id="additionalIdInput" 
                accept="image/*" 
                (change)="onFileChange($event, 'additional')" 
                required 
                class="file-input" />
              <label for="additionalIdInput" class="upload-label">
                <ion-icon name="document-attach-outline" class="upload-icon"></ion-icon>
                <div class="upload-text">
                  <span class="upload-title">Additional Valid ID (Government-issued) <span class="required">*</span></span>
                  <span class="upload-hint">Click or drag to upload</span>
                </div>
                <ion-icon *ngIf="additionalIdPreview" name="checkmark-circle" class="upload-success"></ion-icon>
              </label>
              <div *ngIf="additionalIdPreview" class="image-preview">
                <img [src]="additionalIdPreview" alt="Additional ID Preview" />
              </div>
            </div>
          </div>

          <!-- Payment Method Selection -->
          <div class="payment-section" *ngIf="totalCost > 0">
            <ion-item class="form-field-item payment-select-item">
              <ion-label position="stacked">Payment Method for Down Payment <span class="required">*</span></ion-label>
              <ion-select [(ngModel)]="paymentMethod" name="paymentMethod" placeholder="Select payment method" required>
                <ion-select-option *ngFor="let method of paymentMethods" [value]="method">
                  {{ method }}
                </ion-select-option>
              </ion-select>
            </ion-item>

            <!-- Payment Method Info Box - AFTER selection -->
            <div class="payment-info-box">
              <div class="payment-icons">
                <ion-icon name="wallet-outline" class="payment-icon gcash-icon"></ion-icon>
                <ion-icon name="card-outline" class="payment-icon grabpay-icon"></ion-icon>
                <ion-icon name="cash-outline" class="payment-icon paymaya-icon"></ion-icon>
              </div>
              <p class="payment-info-text">
                We accept <strong>GCash</strong>, <strong>GrabPay</strong>, and <strong>PayMaya</strong> for down payments. 
                Available options will be shown during checkout.
              </p>
            </div>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- ============================================
           COST SUMMARY SECTION
           ============================================ -->
      <ion-card *ngIf="totalCost > 0" class="cost-breakdown form-section-card">
        <ion-card-header>
          <ion-card-title class="section-title">
            <ion-icon name="receipt-outline"></ion-icon>
            Cost Summary
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div class="cost-item">
            <span>Total Cost:</span>
            <span class="amount">‚Ç±{{ totalCost | number:'1.2-2' }}</span>
          </div>
          <div class="cost-item down-payment">
            <span>Down Payment (50%):</span>
            <span class="amount">‚Ç±{{ downPayment | number:'1.2-2' }}</span>
          </div>
          <div class="cost-item remaining">
            <span>Remaining Amount:</span>
            <span class="amount">‚Ç±{{ remainingAmount | number:'1.2-2' }}</span>
          </div>
          <div class="payment-note">
            <ion-icon name="information-circle-outline"></ion-icon>
            <span>You need to pay the down payment to confirm your booking. The remaining amount will be paid upon vehicle pickup.</span>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Action Buttons -->
      <div class="form-actions">
        <!-- Payment Status Indicator -->
        <ion-card *ngIf="paymentInitiated" class="payment-status-card">
          <ion-card-content>
            <div class="payment-status">
              <ion-icon name="card-outline" color="primary"></ion-icon>
              <div>
                <h3>Payment in Progress</h3>
                <p *ngIf="paymentStatus === 'pending'">Redirecting to payment page...</p>
                <p *ngIf="paymentStatus === 'paid'" color="success">Payment confirmed! Redirecting...</p>
                <p *ngIf="paymentStatus === 'failed'" color="danger">Payment failed. Please try again.</p>
              </div>
            </div>
          </ion-card-content>
        </ion-card>

        <ion-button expand="block" type="button" class="btn-primary-modern book-vehicle-button"
          (click)="proceedToPayment()"
          [disabled]="!rentFromDate || !rentToDate || !rentTime || !destination || (serviceType === 'Self Drive' && !validIdFile) || !additionalIdFile || userRentalCount >= maxRentals || isProcessingPayment || paymentInitiated">
          <ion-spinner *ngIf="isProcessingPayment" name="crescent" slot="start"></ion-spinner>
          <span *ngIf="!paymentInitiated">{{ isProcessingPayment ? 'Processing...' : 'Proceed to Payment' }}</span>
          <span *ngIf="paymentInitiated">Payment in Progress...</span>
        </ion-button>
      </div>
    </div>
  </form>
</ion-content>

<!-- Service Type Selection Modal -->
<ion-modal [isOpen]="showServiceTypeModal" [backdropDismiss]="false">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Select Service Type</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="closeServiceTypeModal()">
            <ion-icon name="close"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content class="service-modal-content">
      <!-- Debug: Show current selection -->
      <div *ngIf="serviceType" class="service-selection-info">
        Current Selection: {{ serviceType }}
      </div>
      <div class="service-options">
        <div 
          class="service-option" 
          *ngFor="let option of serviceOptions" 
          [class.selected]="serviceType === option"
          (click)="selectServiceType(option)">
          <div class="service-icon">
            <ion-icon [name]="option === 'Self Drive' ? 'car-outline' : 'location-outline'"></ion-icon>
          </div>
          <div class="service-info">
            <h3>{{ option }}</h3>
            <p *ngIf="option === 'Self Drive'">Drive the vehicle yourself</p>
            <p *ngIf="option === 'Pick-up/Drop-off'">We'll pick you up and drop you off</p>
          </div>
          <div class="service-check" *ngIf="serviceType === option">
            <ion-icon name="checkmark-circle"></ion-icon>
          </div>
        </div>
      </div>
    </ion-content>
    <ion-footer>
      <ion-toolbar>
        <ion-button expand="block" class="btn-primary-modern" (click)="confirmServiceType()" [disabled]="!serviceType">
          Confirm Selection
        </ion-button>
      </ion-toolbar>
    </ion-footer>
  </ng-template>
</ion-modal>

<!-- Company Rules Modal -->
<ion-modal [isOpen]="showCompanyRulesModal" [backdropDismiss]="false" data-modal="company-rules">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Company Rules & Policies</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="closeCompanyRulesModal()">
            <ion-icon name="close"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content class="company-rules-content">
      <div *ngIf="loadingRules" class="loading-container">
        <ion-spinner name="crescent"></ion-spinner>
        <p>Loading company rules...</p>
      </div>
      
      <div *ngIf="!loadingRules && companyRules.length === 0" class="no-rules">
        <ion-icon name="information-circle-outline"></ion-icon>
        <h3>No Rules Available</h3>
        <p>This company has not set any specific rules or policies.</p>
      </div>

      <div *ngIf="!loadingRules && companyRules.length > 0" class="rules-container">
        <div class="rules-header">
          <ion-icon name="document-text-outline"></ion-icon>
          <h2>Important Rules & Policies</h2>
          <p>Please read and understand these rules before proceeding with your booking.</p>
        </div>
        
        <div class="rules-list">
          <div *ngFor="let rule of companyRules" class="rule-item">
            <div class="rule-header">
              <ion-icon name="checkmark-circle-outline"></ion-icon>
              <h3>{{ rule.title }}</h3>
            </div>
            <div class="rule-content">
              <p>{{ rule.content }}</p>
            </div>
          </div>
        </div>
      </div>
    </ion-content>
    <ion-footer *ngIf="!loadingRules">
      <ion-toolbar>
        <ion-button expand="block" class="btn-primary-modern" (click)="acceptCompanyRules()">
          <ion-icon name="checkmark-circle" slot="start"></ion-icon>
          I Understand & Accept
        </ion-button>
      </ion-toolbar>
    </ion-footer>
  </ng-template>
</ion-modal>

<!-- Login Required Modal -->
<ion-modal [isOpen]="showLoginModal" [backdropDismiss]="false">
  <ng-template>
    <ion-header>
      <ion-toolbar color="primary">
        <ion-title>Login Required</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="closeLoginModal()">
            <ion-icon name="close"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding login-modal-content">
      <div class="login-prompt">
        <ion-icon name="log-in-outline" color="primary" size="large"></ion-icon>
        <h2>Create an Account to Rent</h2>
        <p>You need to be logged in to submit a rental request. Please create an account or login to continue.</p>
        
        <ion-button expand="block" class="btn-primary-modern" (click)="goToLogin()">
          <ion-icon name="log-in" slot="start"></ion-icon>
          Log In
        </ion-button>
        
        <ion-button expand="block" class="btn-secondary-modern" (click)="goToRegister()">
          <ion-icon name="person-add" slot="start"></ion-icon>
          Create Account
        </ion-button>
        
        <ion-button expand="block" fill="clear" (click)="closeLoginModal()" style="--color: #FFD700;">
          Continue Browsing
        </ion-button>
      </div>
    </ion-content>
  </ng-template>
</ion-modal>

<!-- Terms and Conditions Modal -->
<ion-modal [isOpen]="showTermsModal" [backdropDismiss]="false">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Rental Terms & Conditions</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding" #termsContent>
      <div class="terms-content">
        <h2>Important Rental Information</h2>
        
        <h3>üìã Rental Requirements</h3>
        <ul>
          <li>Valid government-issued ID (Driver's License for Self Drive)</li>
          <li>Additional government-issued ID required</li>
          <li>Minimum age: 21 years old for Self Drive</li>
          <li>Valid credit card for security deposit</li>
        </ul>

        <h3>‚õΩ Gasoline Policy</h3>
        <ul>
          <li><strong>Gasoline Penalty:</strong> ‚Ç±500 per 1/4 tank below return level</li>
          <li>Vehicle must be returned with the same fuel level as received</li>
          <li>Fuel gauge will be documented at pickup and return</li>
          <li>Additional charges apply for fuel below specified level</li>
        </ul>

        <h3>üöó Damage & Insurance</h3>
        <ul>
          <li><strong>Damage Fee:</strong> ‚Ç±2,000 - ‚Ç±10,000 depending on damage severity</li>
          <li>Comprehensive insurance coverage included</li>
          <li>Deductible applies for damage claims</li>
          <li>Pre-rental inspection required</li>
          <li>Photos will be taken before and after rental</li>
        </ul>

        <h3>üí∞ Additional Charges</h3>
        <ul>
          <li><strong>Late Return:</strong> ‚Ç±500 per hour after scheduled return time</li>
          <li><strong>Cleaning Fee:</strong> ‚Ç±300 for excessive dirt/stains</li>
          <li><strong>Smoking Fee:</strong> ‚Ç±500 if smoking detected</li>
          <li><strong>Pet Fee:</strong> ‚Ç±200 if pets transported</li>
          <li><strong>Traffic Violations:</strong> Customer responsible for all fines</li>
        </ul>

        <h3>üì± Cancellation Policy</h3>
        <ul>
          <li>Free cancellation up to 24 hours before rental</li>
          <li>50% charge for cancellation within 24 hours</li>
          <li>No refund for same-day cancellations</li>
        </ul>

        <h3>‚ö†Ô∏è Important Reminders</h3>
        <ul>
          <li>Inspect vehicle thoroughly before departure</li>
          <li>Report any damage immediately</li>
          <li>Keep emergency contact numbers handy</li>
          <li>Follow traffic rules and speed limits</li>
          <li>Return vehicle on time to avoid late fees</li>
        </ul>

        <h3>üìû Contact Information</h3>
        <p>For emergencies or questions:</p>
        <ul>
          <li>Emergency: +63 931 728 7592</li>
          <li>Support: support&#64;velorent.com</li>
          <li>Office Hours: 8:00 AM - 8:00 PM</li>
        </ul>

        <!-- Remove scroll-indicator -->
      </div>
    </ion-content>
    <ion-footer>
      <ion-toolbar>
        <ion-button expand="block" class="btn-primary-modern" (click)="closeTermsModal()" [disabled]="!hasScrolledToBottom">
          <ion-icon *ngIf="hasScrolledToBottom" name="checkmark-outline" slot="start"></ion-icon>
          {{ hasScrolledToBottom ? 'I Agree to Terms & Conditions' : 'Please scroll down to the bottom to continue' }}
        </ion-button>
      </ion-toolbar>
    </ion-footer>
  </ng-template>
</ion-modal> 