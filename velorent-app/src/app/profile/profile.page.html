<ion-header>
  <ion-toolbar>
    <ion-title>Profile & Settings</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content id="main-content" class="ion-padding">
  <!-- User Profile Section (Only for logged-in users) -->
  <ion-card *ngIf="user" class="profile-card">
    <ion-card-header>
      <div class="profile-header">
        <ion-avatar class="profile-avatar">
          <ion-icon name="person-circle" class="avatar-icon"></ion-icon>
        </ion-avatar>
        <div class="profile-info">
          <ion-card-title>{{ user.name }}</ion-card-title>
          <ion-card-subtitle>{{ user.role | titlecase }}</ion-card-subtitle>
        </div>
      </div>
    </ion-card-header>
    <ion-card-content>
      <div class="profile-field">
        <span class="profile-label">ID</span>
        <span class="profile-value">{{ user.id }}</span>
      </div>
      <div class="profile-field">
        <span class="profile-label">Email</span>
        <span class="profile-value">{{ user.email }}</span>
      </div>
      <div class="profile-field">
        <span class="profile-label">Role</span>
        <span class="profile-value">{{ user.role }}</span>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Quick Actions Section -->
  <ion-card class="quick-actions-card">
    <ion-card-header>
      <ion-card-title>Quick Actions</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="6" *ngIf="!user">
            <ion-button expand="block" fill="outline" (click)="goToLogin()" class="action-button">
              <ion-icon name="log-in-outline" slot="start"></ion-icon>
              Login
            </ion-button>
          </ion-col>
          <ion-col size="6" *ngIf="!user">
            <ion-button expand="block" fill="outline" (click)="goToRegister()" class="action-button">
              <ion-icon name="person-add-outline" slot="start"></ion-icon>
              Register
            </ion-button>
          </ion-col>
          <ion-col size="6" *ngIf="user">
            <ion-button expand="block" fill="outline" (click)="navigateToMyRentals()" class="action-button">
              <ion-icon name="car-outline" slot="start"></ion-icon>
              My Rentals
            </ion-button>
          </ion-col>
          <ion-col size="6" *ngIf="user">
            <ion-button expand="block" fill="outline" (click)="navigateToHome()" class="action-button">
              <ion-icon name="home-outline" slot="start"></ion-icon>
              Browse Vehicles
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <!-- App Settings Section (Available to all users) -->
  <ion-card class="settings-card">
    <ion-card-header>
      <ion-card-title>App Settings</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-icon name="moon-outline" slot="start"></ion-icon>
          <ion-label>Dark Mode</ion-label>
          <ion-toggle [(ngModel)]="darkMode" (ionChange)="toggleDarkMode()"></ion-toggle>
        </ion-item>
        <ion-item>
          <ion-icon name="notifications-outline" slot="start"></ion-icon>
          <ion-label>Push Notifications</ion-label>
          <ion-toggle [(ngModel)]="notifications" (ionChange)="toggleNotifications()"></ion-toggle>
        </ion-item>
        <ion-item>
          <ion-icon name="location-outline" slot="start"></ion-icon>
          <ion-label>Location Services</ion-label>
          <ion-toggle [(ngModel)]="locationServices" (ionChange)="toggleLocationServices()"></ion-toggle>
        </ion-item>
        <ion-item button (click)="openLanguageSettings()">
          <ion-icon name="language-outline" slot="start"></ion-icon>
          <ion-label>Language</ion-label>
          <ion-note slot="end">English</ion-note>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Legal & Support Section (Available to all users) -->
  <ion-card class="legal-card">
    <ion-card-header>
      <ion-card-title>Legal & Support</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item button (click)="openPrivacyPolicy()">
          <ion-icon name="shield-outline" slot="start"></ion-icon>
          <ion-label>Privacy Policy</ion-label>
        </ion-item>
        <ion-item button (click)="openTermsOfService()">
          <ion-icon name="document-text-outline" slot="start"></ion-icon>
          <ion-label>Terms of Service</ion-label>
        </ion-item>
        <ion-item button (click)="openHelp()">
          <ion-icon name="help-circle-outline" slot="start"></ion-icon>
          <ion-label>Help & Support</ion-label>
        </ion-item>
        <ion-item button (click)="openAbout()">
          <ion-icon name="information-circle-outline" slot="start"></ion-icon>
          <ion-label>About VeloRent</ion-label>
        </ion-item>
        <ion-item button (click)="openContact()">
          <ion-icon name="mail-outline" slot="start"></ion-icon>
          <ion-label>Contact Us</ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Account Management Section (Only for logged-in users) -->
  <ion-card class="account-card" *ngIf="user">
    <ion-card-header>
      <ion-card-title>Account Management</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item button (click)="openEditProfile()">
          <ion-icon name="create-outline" slot="start"></ion-icon>
          <ion-label>Edit Profile</ion-label>
        </ion-item>
        <ion-item button (click)="openChangePassword()">
          <ion-icon name="key-outline" slot="start"></ion-icon>
          <ion-label>Change Password</ion-label>
        </ion-item>
        <ion-item button (click)="openAccountSettings()">
          <ion-icon name="settings-outline" slot="start"></ion-icon>
          <ion-label>Account Settings</ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Logout Button (Only for logged-in users) -->
  <ion-button expand="block" color="danger" class="logout-btn" *ngIf="user" (click)="logout()">
    <ion-icon name="log-out-outline" slot="start"></ion-icon>
    Sign Out
  </ion-button>

  <!-- App Information -->
  <ion-card class="app-info-card">
    <ion-card-content>
      <div class="app-info">
        <ion-icon name="car-sport-outline" class="app-icon"></ion-icon>
        <h3>VeloRent</h3>
        <p>Version 1.0.0</p>
        <p>Vehicle Rental Management System</p>
        <p class="copyright">Â© 2025 VeloRent. All rights reserved.</p>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>

<!-- Bottom Navigation -->
<div class="bottom-nav">
  <div class="nav-container">
    <button class="nav-button" (click)="navigateToHome()">
      <ion-icon name="home" class="nav-icon"></ion-icon>
      <span class="nav-label">Home</span>
    </button>
    
    <button class="nav-button" (click)="navigateToMyRentals()">
      <ion-icon name="car-outline" class="nav-icon"></ion-icon>
      <span class="nav-label">My Rentals</span>
    </button>
    
    <button class="nav-button" (click)="navigateToNotifications()">
      <ion-icon name="notifications-outline" class="nav-icon"></ion-icon>
      <span class="nav-label">Notifications</span>
    </button>
    
    <button class="nav-button active" (click)="navigateToProfile()">
      <ion-icon name="person-outline" class="nav-icon"></ion-icon>
      <span class="nav-label">Profile</span>
    </button>
  </div>
</div>