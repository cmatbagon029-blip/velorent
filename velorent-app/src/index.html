<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Ionic App</title>

  <base href="/" />

  <meta name="color-scheme" content="light dark" />
  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />

  <link rel="icon" type="image/png" href="assets/icon/favicon.png" />

  <!-- add to homescreen for ios -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <!-- Polyfills for Android WebView compatibility - MUST run before any other scripts -->
  <script>
    // globalThis polyfill
    (function() {
      if (typeof globalThis === 'undefined') {
        if (typeof window !== 'undefined') {
          window.globalThis = window;
        } else if (typeof self !== 'undefined') {
          self.globalThis = self;
        }
      }
    })();
    
    // queueMicrotask polyfill - CRITICAL: Must be defined before Zone.js
    (function() {
      if (typeof queueMicrotask === 'undefined') {
        var globalObj = typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {});
        var queueMicrotaskImpl = function(callback) {
          if (typeof Promise !== 'undefined' && Promise.resolve) {
            Promise.resolve().then(callback).catch(function(error) {
              setTimeout(function() { throw error; }, 0);
            });
          } else {
            // Fallback if Promise is not available
            setTimeout(callback, 0);
          }
        };
        // Define on both window/self and global scope
        globalObj.queueMicrotask = queueMicrotaskImpl;
        // Also try to define on global scope if it exists
        try {
          if (typeof global !== 'undefined') {
            global.queueMicrotask = queueMicrotaskImpl;
          }
        } catch(e) {}
      }
    })();
  </script>
</head>

<body>
  <app-root></app-root>
</body>

</html>
